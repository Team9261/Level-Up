#pragma config(Hubs,  S1, HTMotor,  HTMotor,  HTServo,  none)
#pragma config(Sensor, S1,     ,               sensorI2CMuxController)
#pragma config(Motor,  motorB,           ,             tmotorNXT, openLoop)
#pragma config(Motor,  motorC,           ,             tmotorNXT, openLoop)
#pragma config(Motor,  mtr_S1_C1_1,     motorA,        tmotorTetrix, openLoop, encoder)
#pragma config(Motor,  mtr_S1_C1_2,     motorB,        tmotorTetrix, openLoop, reversed, encoder)
#pragma config(Motor,  mtr_S1_C2_1,     motorL,        tmotorTetrix, openLoop, encoder)
#pragma config(Motor,  mtr_S1_C2_2,     motorSl,        tmotorTetrix, openLoop)
#pragma config(Motor,  mtr_S1_C3_1,     motorSp,        tmotorTetrix, openLoop)
#pragma config(Servo,  srvo_S1_C3_1,    servo1,               tServoNone)
#pragma config(Servo,  srvo_S1_C3_2,    servo2,               tServoNone)
#pragma config(Servo,  srvo_S1_C3_3,    servo3,               tServoNone)
#pragma config(Servo,  srvo_S1_C3_4,    servo4,               tServoNone)
#pragma config(Servo,  srvo_S1_C3_5,    servo5,               tServoNone)
#pragma config(Servo,  srvo_S1_C3_6,    servo6,               tServoNone)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#include "JoystickDriver.c" // adds file to take bt controllers

/* Some configuration/wiring settings for this code:
 first wire goes to right motor, second to left
*/






task main(){//the start of the robot acutally doing things

		//some starting variables
		int jBuffer = 25; //buffer for joysticks
		int sTime = 10; //sleep time, reaction time
		int dSpeed = 50; //drive speed
		int tSpeed = 20; //turning speed
		int lSpeed = 10; //lift speed
		int slSpeed = 10; //slide speed
		int spSpeed = 25; //spinner speed

		//button setup
		int bX = 0;
		int bA = 1;
		int bB = 2;
		int bY = 3;
		int LB = 4;
		int RB = 5;
		int LT = 6;
		int RT = 7;
		int bBack = 8;
		int bStart = 9;
 	//waitForStart(); //waits for driving period to start, only in comp <================== change for comp =====================

	while(true){// the driving loop

		getJoystickSettings(joystick);//updates joystick

		/*if(abs(joystick.joy1_x1) < jBuffer && abs(joystick.joy1_y1) < jBuffer){ //stop
			motor[motorA] = 0;
			motor[motorB] = 0;
			sleep = sTime;

	}

		if(abs(joystick.joy1_x1) < jBuffer && (joystick.joy1_y1) > jBuffer){ //forwards
			motor[motorA] = dSpeed;
			motor[motorB] = dSpeed;
			sleep = sTime;

	}

		if(abs(joystick.joy1_x1) < jBuffer && (joystick.joy1_y1) < -jBuffer){ //backwards
			motor[motorA] = -dSpeed;
			motor[motorB] = -dSpeed;
			sleep = sTime;

	}

		if((joystick.joy1_x1) > jBuffer && abs(joystick.joy1_y1) < jBuffer){ //right point
			motor[motorA] = tSpeed;
			motor[motorB] = -tSpeed;
			sleep = sTime;

	}

		if((joystick.joy1_x1) < -jBuffer && abs(joystick.joy1_y1) < jBuffer){ //left point
			motor[motorA] = -tSpeed;
			motor[motorB] = tSpeed;
			sleep = sTime;

	}

		if((joystick.joy1_x1) > jBuffer && (joystick.joy1_y1) > jBuffer){ //forwards right swing
			motor[motorA] = 0;
			motor[motorB] = tSpeed;
			sleep = sTime;

	}

		if((joystick.joy1_x1) > jBuffer && (joystick.joy1_y1) < -jBuffer){ //backwards right swing
			motor[motorA] = 0;
			motor[motorB] = -tSpeed;
			sleep = sTime;

	}

		if((joystick.joy1_x1) < -jBuffer && (joystick.joy1_y1) > jBuffer){ //forwards left swing
			motor[motorA] = 0;
			motor[motorB] = tSpeed;
			sleep = sTime;

	}

		if((joystick.joy1_x1) < -jBuffer && (joystick.joy1_y1) < -jBuffer){ //backwards left swing
			motor[motorA] = 0;
			motor[motorB] = -tSpeed;
			sleep = sTime;

	}*/

	if(abs(joystick.joy1_y1) < jBuffer){ //stop right
		motor[motorA] = 0;
	}

	if(abs(joystick.joy1_y2) < jBuffer){ //stop left
		motor[motorB] = 0;
	}

	if((joystick.joy1_y1) > jBuffer){ //forwards right
		motor[motorA] = dSpeed;
	}

	if((joystick.joy1_y2) > jBuffer){ //forwards left
		motor[motorB] = dSpeed;
	}

	if((joystick.joy1_y1) < -jBuffer){//backwards right
		motor[motorA] = -dSpeed;
	}

	if((joystick.joy1_y2) < -jBuffer){//backwards left
		motor[motorB] = -dSpeed;
	}

	//arm lift
	if(abs(joystick.joy2_y1) < jBuffer){//lift stop
		motor[motorL] = 0;
	}

	if((joystick.joy2_y1) > jBuffer){//lift up?
		motor[motorL] = lSpeed;
	}

	if((joystick.joy2_y1) < -jBuffer){//lift down?
		motor[motorL] = -lSpeed;
	}

	//slide speed
	if(abs(joystick.joy2_y2) < jBuffer){//slide stop
		motor[motorSl] = 0;
	}

	if((joystick.joy2_y2) > jBuffer){//slide forwards?
		motor[motorSl] = slSpeed;
	}

	if((joystick.joy2_y2) < -jBuffer){//slide backwards?
		motor[motorSl] = -slSpeed;
	}

	//spinner
	if(joy1Btn(1) == 0 && joy1Btn(2) == 0 && joy1Btn(3) == 0 && joy1Btn(4) == 0 && joy1Btn(5) == 0 && joy1Btn(6) == 0 && joy1Btn(7) == 0 && joy1Btn(8) == 0 &&
		 joy2Btn(1) == 0 && joy2Btn(2) == 0 && joy2Btn(3) == 0 && joy2Btn(4) == 0 && joy2Btn(5) == 0 && joy2Btn(6) == 0 && joy2Btn(7) == 0 && joy2Btn(8) == 0 &&
		 joystick.joy1_TopHat == -1 && joystick.joy2_Tophat == -1){//spin stop
		motor[motorSp] = 0;
	} else if(joy1Btn(1) == 1 || joy1Btn(2) == 1 || joy1Btn(3) == 1 ||  joy1Btn(4) == 1 ||  joy1Btn(6) == 1 || joy1Btn(8) == 1 ||
						joy2Btn(1) == 1 || joy2Btn(2) == 1 || joy2Btn(3) == 1 ||  joy2Btn(4) == 1 ||  joy2Btn(6) == 1 || joy2Btn(8) == 1 ||) { //spin forwards?
		motor[motorSp] = spSpeed;
	}else if(joy1Btn(5) == 1 || joy1Btn(7) == 1 || joy2Btn(5) == 1 || joy2Btn(7) == 1 || joystick.joy1_TopHat > -1 || joystick.joy2_Tophat > -1) { //spin backwards?
		motor[motorSp] = spSpeed;
}//end of while true loop
}//end of task main
